(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{8126:(e,s,t)=>{Promise.resolve().then(t.bind(t,1148))},1148:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var a=t(5155),r=t(4110),i=t(425),l=t(8888),n=t(6062),d=t(2823),c=t(6745),o=t(2640),m=t(8236),h=t(3239),x=t(1594),u=t(1773),p=t(1069),b=t(3726),g=t(4085),j=t(2115),f=t(5472),N=t(2336),w=t(9515),y=t(767),v=t(9602);let k=w.bL;w.l9;let S=w.ZL;w.bm;let _=j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.hJ,{ref:s,className:(0,v.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});_.displayName=w.hJ.displayName;let A=j.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(S,{children:[(0,a.jsx)(_,{}),(0,a.jsxs)(w.UC,{ref:s,className:(0,v.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[r,(0,a.jsxs)(w.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(y.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});A.displayName=w.UC.displayName;let C=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,v.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};C.displayName="DialogHeader";let F=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,v.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};F.displayName="DialogFooter";let T=j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.hE,{ref:s,className:(0,v.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});T.displayName=w.hE.displayName,j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.VY,{ref:s,className:(0,v.cn)("text-sm text-muted-foreground",t),...r})}).displayName=w.VY.displayName;var E=t(2413);let D=j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(E.bL,{className:(0,v.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(E.zi,{className:(0,v.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});D.displayName=E.bL.displayName;var R=t(6195);let U=(0,t(6421).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),z=j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(R.b,{ref:s,className:(0,v.cn)(U(),t),...r})});z.displayName=R.b.displayName;var I=t(127),B=t(1719),P=t(1902),L=t(8867);let M=I.bL;I.YJ;let O=I.WT,J=j.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(I.l9,{ref:s,className:(0,v.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,a.jsx)(I.In,{asChild:!0,children:(0,a.jsx)(B.A,{className:"h-4 w-4 opacity-50"})})]})});J.displayName=I.l9.displayName;let V=j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.PP,{ref:s,className:(0,v.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})});V.displayName=I.PP.displayName;let q=j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.wn,{ref:s,className:(0,v.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(B.A,{className:"h-4 w-4"})})});q.displayName=I.wn.displayName;let Y=j.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...l}=e;return(0,a.jsx)(I.ZL,{children:(0,a.jsxs)(I.UC,{ref:s,className:(0,v.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,a.jsx)(V,{}),(0,a.jsx)(I.LM,{className:(0,v.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(q,{})]})})});Y.displayName=I.UC.displayName,j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.JU,{ref:s,className:(0,v.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=I.JU.displayName;let W=j.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(I.q7,{ref:s,className:(0,v.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(I.VF,{children:(0,a.jsx)(L.A,{className:"h-4 w-4"})})}),(0,a.jsx)(I.p4,{children:r})]})});function Z(){return(0,a.jsx)(b.A,{requiredRole:"admin",children:(0,a.jsx)(G,{})})}function G(){let{user:e,logout:s}=(0,p.A)(),[t,b]=(0,j.useState)("dashboard"),[w,y]=(0,j.useState)(!0),[v,S]=(0,j.useState)(null),[_,E]=(0,j.useState)([]),[R,U]=(0,j.useState)([]),[I,B]=(0,j.useState)(null),[P,L]=(0,j.useState)(null),[V,q]=(0,j.useState)(null),[Z,G]=(0,j.useState)(!1),[H,K]=(0,j.useState)(null),[Q,X]=(0,j.useState)({username:"",email:"",role:"",is_active:!0}),[$,ee]=(0,j.useState)(!1),[es,et]=(0,j.useState)(!1),ea=async()=>{y(!0),L(null);try{let e="http://localhost:8080/api",s=localStorage.getItem("token"),t={Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"},a=await fetch("".concat(e,"/admin/stats"),{headers:t}),r=await fetch("".concat(e,"/admin/users"),{headers:t}),i=await fetch("".concat(e,"/admin/activity"),{headers:t}),l=await fetch("".concat(e,"/admin/settings"),{headers:t});if(!a.ok||!r.ok||!i.ok||!l.ok)throw Error("Failed to fetch admin data");let n=await a.json(),d=await r.json(),c=await i.json(),o=await l.json();S(n),E(d),U(c),B(o)}catch(e){console.error("Error fetching admin data:",e),L("Failed to load admin data. Using mock data instead."),S({total_users:42,active_users:38,researchers:15,regular_users:26,system_uptime:"3 days, 7 hours",database_size:"42.5 MB"}),E([{id:1,username:"admin",email:"admin@example.com",role:"admin",is_active:!0,created_at:"2023-01-01T00:00:00"},{id:2,username:"researcher",email:"researcher@example.com",role:"researcher",is_active:!0,created_at:"2023-01-02T00:00:00"},{id:3,username:"user",email:"user@example.com",role:"user",is_active:!0,created_at:"2023-01-03T00:00:00"}]),U([{id:1,action:"User login",username:"researcher",timestamp:"2023-04-01T10:30:00",details:"Successful login"},{id:2,action:"Data export",username:"researcher",timestamp:"2023-04-01T09:15:00",details:"Exported 1,245 records"},{id:3,action:"Failed login attempt",username:"unknown",timestamp:"2023-04-01T08:45:00",details:"Invalid credentials"}]),B({maintenance_mode:!1,debug_mode:!0,api_rate_limiting:!0,last_backup:"2023-04-01T08:45:00"})}finally{y(!1)}};(0,j.useEffect)(()=>{ea()},[]);let er=async(e,s)=>{try{et(!0);let t=localStorage.getItem("token"),a=await fetch("".concat("http://localhost:8080/api","/admin/settings"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({[e]:s})});if(!a.ok)throw Error("Failed to update setting");let r=await a.json();B(r),q({type:"success",message:"".concat(e.replace(/_/g," ")," has been ").concat(s?"enabled":"disabled")}),setTimeout(()=>q(null),3e3)}catch(e){console.error("Error updating setting:",e),q({type:"error",message:"Failed to update setting"}),setTimeout(()=>q(null),3e3)}finally{et(!1)}},ei=async()=>{try{et(!0);let e=localStorage.getItem("token");if(!(await fetch("".concat("http://localhost:8080/api","/admin/backup"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok)throw Error("Failed to start backup");q({type:"success",message:"Backup process started"}),setTimeout(()=>{ea(),q(null)},3e3)}catch(e){console.error("Error starting backup:",e),q({type:"error",message:"Failed to start backup"}),setTimeout(()=>q(null),3e3)}finally{et(!1)}},el=async()=>{try{et(!0);let e=localStorage.getItem("token");if(!(await fetch("".concat("http://localhost:8080/api","/admin/export-data"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok)throw Error("Failed to export data");q({type:"success",message:"Data export initiated"}),setTimeout(()=>q(null),3e3)}catch(e){console.error("Error exporting data:",e),q({type:"error",message:"Failed to export data"}),setTimeout(()=>q(null),3e3)}finally{et(!1)}},en=async()=>{try{et(!0);let e=localStorage.getItem("token");if(!(await fetch("".concat("http://localhost:8080/api","/admin/cleanup-data"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok)throw Error("Failed to clean up data");q({type:"success",message:"Data cleanup process started"}),setTimeout(()=>q(null),3e3)}catch(e){console.error("Error cleaning up data:",e),q({type:"error",message:"Failed to clean up data"}),setTimeout(()=>q(null),3e3)}finally{et(!1)}},ed=e=>{K(e),X({username:e.username,email:e.email,role:e.role,is_active:e.is_active}),G(!0)},ec=async()=>{try{et(!0);let e=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:8080/api","/admin/users/").concat(H.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to update user")}let t=await s.json();E(_.map(e=>e.id===t.id?t:e)),q({type:"success",message:"User ".concat(t.username," updated successfully")}),G(!1),setTimeout(()=>q(null),3e3)}catch(e){console.error("Error updating user:",e),q({type:"error",message:e.message||"Failed to update user"}),setTimeout(()=>q(null),3e3)}finally{et(!1)}},eo=e=>{K(e),ee(!0)},em=async()=>{try{et(!0);let e=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:8080/api","/admin/users/").concat(H.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to delete user")}E(_.filter(e=>e.id!==H.id)),q({type:"success",message:"User ".concat(H.username," deleted successfully")}),ee(!1),setTimeout(()=>q(null),3e3)}catch(e){console.error("Error deleting user:",e),q({type:"error",message:e.message||"Failed to delete user"}),setTimeout(()=>q(null),3e3)}finally{et(!1)}},eh=[{id:"dashboard",label:"Dashboard",icon:n.A},{id:"users",label:"Users",icon:d.A},{id:"activity",label:"Activity Log",icon:c.A},{id:"permissions",label:"Permissions",icon:o.A},{id:"settings",label:"Settings",icon:m.A}];return(0,a.jsxs)("main",{className:"min-h-screen bg-black/[0.96] antialiased bg-grid-white/[0.02] relative overflow-hidden",children:[(0,a.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,a.jsx)(i.SparklesCore,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"#FFFFFF"})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(r.default,{}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(l.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Admin Dashboard"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"px-4 py-2 bg-white/5 backdrop-blur-sm rounded-lg border border-white/10",children:(0,a.jsxs)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 font-bold",children:["Welcome, ",null==e?void 0:e.username]})})})]}),V&&(0,a.jsxs)("div",{className:"mb-4 p-3 rounded-md flex items-center ".concat("success"===V.type?"bg-green-500/20 border border-green-500 text-green-200":"bg-red-500/20 border border-red-500 text-red-200"),children:["success"===V.type?(0,a.jsx)(h.A,{className:"h-5 w-5 mr-2"}):(0,a.jsx)(x.A,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("p",{children:V.message})]}),(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg border border-white/10 overflow-hidden",children:[(0,a.jsx)("div",{className:"flex border-b border-white/10 overflow-x-auto",children:eh.map(e=>(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap ".concat(t===e.id?"text-white bg-purple-500/20 border-b-2 border-purple-500":"text-gray-400 hover:text-white hover:bg-white/5"),onClick:()=>b(e.id),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.label})]},e.id))}),(0,a.jsx)("div",{className:"p-6",children:w?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(f.A,{})}):(0,a.jsxs)(a.Fragment,{children:[P&&(0,a.jsx)("div",{className:"bg-yellow-500/20 border border-yellow-500 text-yellow-200 px-4 py-2 rounded-md mb-4",children:(0,a.jsx)("p",{children:P})}),"dashboard"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"System Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"User Statistics"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Total Users:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==v?void 0:v.total_users})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Active Users:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==v?void 0:v.active_users})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Researchers:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==v?void 0:v.researchers})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Regular Users:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==v?void 0:v.regular_users})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"System Status"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Uptime:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==v?void 0:v.system_uptime})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Database Size:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==v?void 0:v.database_size})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,a.jsx)("span",{className:"text-green-500 font-medium",children:"Operational"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Recent Activity"}),(0,a.jsx)("div",{className:"space-y-2",children:null==R?void 0:R.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"text-white",children:e.action}),(0,a.jsxs)("div",{className:"text-gray-400 text-xs",children:[new Date(e.timestamp).toLocaleString()," - ",e.username]})]},e.id))})]})]})]}),"users"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"User Management"}),(0,a.jsx)("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-white/10",children:[(0,a.jsx)("th",{className:"p-3 text-gray-400",children:"ID"}),(0,a.jsx)("th",{className:"p-3 text-gray-400",children:"Username"}),(0,a.jsx)("th",{className:"p-3 text-gray-400",children:"Email"}),(0,a.jsx)("th",{className:"p-3 text-gray-400",children:"Role"}),(0,a.jsx)("th",{className:"p-3 text-gray-400",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-gray-400",children:"Created"}),(0,a.jsx)("th",{className:"p-3 text-gray-400",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:null==_?void 0:_.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[(0,a.jsx)("td",{className:"p-3 text-white",children:e.id}),(0,a.jsx)("td",{className:"p-3 text-white",children:e.username}),(0,a.jsx)("td",{className:"p-3 text-white",children:e.email}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("admin"===e.role?"bg-purple-500 text-white":"researcher"===e.role?"bg-blue-500 text-white":"bg-gray-500 text-white"),children:e.role})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.is_active?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.is_active?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"p-3 text-gray-400",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(g.Button,{variant:"outline",size:"sm",className:"text-xs h-7 border-purple-500 text-white hover:bg-purple-500/20",onClick:()=>ed(e),children:"Edit"}),"admin"!==e.username&&(0,a.jsx)(g.Button,{variant:"outline",size:"sm",className:"text-xs h-7 border-red-500 text-white hover:bg-red-500/20",onClick:()=>eo(e),children:"Delete"})]})})]},e.id))})]})})]}),"activity"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Activity Log"}),(0,a.jsx)("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:(0,a.jsx)("div",{className:"space-y-4",children:null==R?void 0:R.map(e=>(0,a.jsxs)("div",{className:"p-3 border-b border-white/10 last:border-0",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.action}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:new Date(e.timestamp).toLocaleString()})]}),(0,a.jsxs)("div",{className:"text-gray-400 mt-1",children:["User: ",e.username]}),(0,a.jsx)("div",{className:"text-gray-400 text-sm mt-1",children:e.details})]},e.id))})})]}),"permissions"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Permissions"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Configure role-based permissions and access controls for your application."}),(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Role Management"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 border border-white/10 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Admin"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Full access to all system features and settings."}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"User Management"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"System Settings"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"Data Management"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"Activity Logs"})]})]}),(0,a.jsxs)("div",{className:"p-4 border border-white/10 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Researcher"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Access to research tools and data analysis features."}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"DataPuur"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"KGInsights"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"Data Management"})]})]}),(0,a.jsxs)("div",{className:"p-4 border border-white/10 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"User"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Basic access to application features."}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"View Reports"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-white",children:"Personal Settings"})]})]})]})]})]}),"settings"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"System Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-white/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-medium",children:"Maintenance Mode"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Temporarily disable access to the application"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(D,{id:"maintenance-mode",checked:(null==I?void 0:I.maintenance_mode)||!1,onCheckedChange:e=>er("maintenance_mode",e),disabled:es}),(0,a.jsx)(z,{htmlFor:"maintenance-mode",className:"sr-only",children:"Maintenance Mode"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-white/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-medium",children:"Debug Mode"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Enable detailed error messages and logging"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(D,{id:"debug-mode",checked:(null==I?void 0:I.debug_mode)||!1,onCheckedChange:e=>er("debug_mode",e),disabled:es}),(0,a.jsx)(z,{htmlFor:"debug-mode",className:"sr-only",children:"Debug Mode"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-white/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-medium",children:"API Rate Limiting"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Limit API requests per user"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(D,{id:"api-rate-limiting",checked:(null==I?void 0:I.api_rate_limiting)||!1,onCheckedChange:e=>er("api_rate_limiting",e),disabled:es}),(0,a.jsx)(z,{htmlFor:"api-rate-limiting",className:"sr-only",children:"API Rate Limiting"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Data Management"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-white/10",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Database Backup"}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs mb-3",children:["Last backup:"," ",(null==I?void 0:I.last_backup)?new Date(I.last_backup).toLocaleString():"Never"]}),(0,a.jsx)(g.Button,{className:"bg-purple-600 hover:bg-purple-700 text-white text-xs py-1 h-8",onClick:ei,disabled:es,children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1 animate-spin"}),"Running..."]}):"Run Backup Now"})]}),(0,a.jsxs)("div",{className:"p-3 border-b border-white/10",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Data Export"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-3",children:"Export system data for backup or migration"}),(0,a.jsx)(g.Button,{className:"bg-purple-600 hover:bg-purple-700 text-white text-xs py-1 h-8",onClick:el,disabled:es,children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1 animate-spin"}),"Exporting..."]}):"Export Data"})]}),(0,a.jsxs)("div",{className:"p-3 border-b border-white/10",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Data Cleanup"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-3",children:"Remove old or unused data from the system"}),(0,a.jsx)(g.Button,{className:"bg-purple-600 hover:bg-purple-700 text-white text-xs py-1 h-8",onClick:en,disabled:es,children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1 animate-spin"}),"Cleaning..."]}):"Cleanup Data"})]})]})]})]})]})]})})]})]})]}),(0,a.jsx)(k,{open:Z,onOpenChange:G,children:(0,a.jsxs)(A,{className:"bg-black/90 border border-white/10 text-white",children:[(0,a.jsx)(C,{children:(0,a.jsx)(T,{children:"Edit User"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(z,{htmlFor:"username",children:"Username"}),(0,a.jsx)(N.p,{id:"username",value:Q.username,onChange:e=>X({...Q,username:e.target.value}),className:"bg-white/5 border-white/10 text-white",disabled:(null==H?void 0:H.username)==="admin"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(z,{htmlFor:"email",children:"Email"}),(0,a.jsx)(N.p,{id:"email",value:Q.email,onChange:e=>X({...Q,email:e.target.value}),className:"bg-white/5 border-white/10 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(z,{htmlFor:"role",children:"Role"}),(0,a.jsxs)(M,{value:Q.role,onValueChange:e=>X({...Q,role:e}),disabled:(null==H?void 0:H.username)==="admin",children:[(0,a.jsx)(J,{className:"bg-white/5 border-white/10 text-white",children:(0,a.jsx)(O,{placeholder:"Select a role"})}),(0,a.jsxs)(Y,{className:"bg-black/90 border border-white/10 text-white",children:[(0,a.jsx)(W,{value:"admin",children:"Admin"}),(0,a.jsx)(W,{value:"researcher",children:"Researcher"}),(0,a.jsx)(W,{value:"user",children:"User"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(D,{id:"is_active",checked:Q.is_active,onCheckedChange:e=>X({...Q,is_active:e}),disabled:(null==H?void 0:H.username)==="admin"}),(0,a.jsx)(z,{htmlFor:"is_active",children:"Active"})]})]}),(0,a.jsxs)(F,{children:[(0,a.jsx)(g.Button,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,a.jsx)(g.Button,{className:"bg-purple-600 hover:bg-purple-700 text-white",onClick:ec,disabled:es,children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}),(0,a.jsx)(k,{open:$,onOpenChange:ee,children:(0,a.jsxs)(A,{className:"bg-black/90 border border-white/10 text-white",children:[(0,a.jsx)(C,{children:(0,a.jsx)(T,{children:"Delete User"})}),(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsxs)("p",{children:["Are you sure you want to delete user ",(0,a.jsx)("span",{className:"font-bold",children:null==H?void 0:H.username}),"?"]}),(0,a.jsx)("p",{className:"text-red-400 text-sm mt-2",children:"This action cannot be undone."})]}),(0,a.jsxs)(F,{children:[(0,a.jsx)(g.Button,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"}),(0,a.jsx)(g.Button,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:em,disabled:es,children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})})]})}W.displayName=I.q7.displayName,j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.wv,{ref:s,className:(0,v.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=I.wv.displayName},5472:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(5155),r=t(8888);function i(){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(r.P.div,{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"}}),(0,a.jsx)("p",{className:"mt-4 text-white",children:"Loading data..."})]})}},3726:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(5155),r=t(1069),i=t(6046),l=t(2115),n=t(5472);function d(e){let{children:s,requiredRole:t}=e,{user:d,isLoading:c}=(0,r.A)(),o=(0,i.useRouter)(),m=(0,i.usePathname)();return((0,l.useEffect)(()=>{c||d?!c&&d&&t&&("admin"===t&&"admin"!==d.role||"researcher"===t&&!["admin","researcher"].includes(d.role))&&o.push("/"):o.push("/login?redirect=".concat(encodeURIComponent(m)))},[d,c,o,m,t]),c)?(0,a.jsx)("div",{className:"min-h-screen bg-black/[0.96] flex items-center justify-center",children:(0,a.jsx)(n.A,{})}):t&&d&&("admin"===t&&"admin"!==d.role||"researcher"===t&&!["admin","researcher"].includes(d.role))||!d?null:(0,a.jsx)(a.Fragment,{children:s})}},2336:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(5155),r=t(2115),i=t(9602);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});l.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[489,565,666,786,441,517,358],()=>s(8126)),_N_E=e.O()}]);