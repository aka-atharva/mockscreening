"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{425:(e,t,r)=>{r.d(t,{SparklesCore:()=>a});var o=r(5155),n=r(2115);let a=e=>{let{id:t="tsparticles",background:r="transparent",minSize:a=.6,maxSize:s=1.4,particleDensity:i=100,className:l="h-full w-full",particleColor:c="#FFFFFF"}=e,h=(0,n.useRef)(null),d=function(){let[e,t]=(0,n.useState)({x:0,y:0});return(0,n.useEffect)(()=>{let e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),e}(),[u,f]=(0,n.useState)({width:1200,height:800});return(0,n.useEffect)(()=>{let e;f({width:window.innerWidth,height:window.innerHeight});let t=h.current;if(!t)return;let r=t.getContext("2d");if(!r)return;let o=[];t.width=window.innerWidth,t.height=window.innerHeight;class n{update(){this.x+=this.speedX,this.y+=this.speedY,this.x>t.width&&(this.x=0),this.x<0&&(this.x=t.width),this.y>t.height&&(this.y=0),this.y<0&&(this.y=t.height);let e=d.x-this.x,r=d.y-this.y;if(100>Math.sqrt(e*e+r*r)){let t=Math.atan2(r,e);this.x-=1*Math.cos(t),this.y-=1*Math.sin(t)}}draw(){r&&(r.fillStyle=c,r.beginPath(),r.arc(this.x,this.y,this.size,0,2*Math.PI),r.fill())}constructor(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.size=Math.random()*(s-a)+a,this.speedX=.5*Math.random()-.25,this.speedY=.5*Math.random()-.25}}let l=()=>{o=[];for(let e=0;e<i;e++)o.push(new n)},u=()=>{r&&(r.clearRect(0,0,t.width,t.height),o.forEach(e=>{e.update(),e.draw()}),e=requestAnimationFrame(u))};l(),u();let g=()=>{t.width=window.innerWidth,t.height=window.innerHeight,f({width:window.innerWidth,height:window.innerHeight}),l()};return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g),cancelAnimationFrame(e)}},[s,a,c,i,d.x,d.y]),(0,o.jsx)("canvas",{ref:h,id:t,className:l,style:{background:r,width:u.width,height:u.height}})}},4085:(e,t,r)=>{r.d(t,{Button:()=>c});var o=r(5155),n=r(2115),a=r(1290),s=r(6421),i=r(9602);let l=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:s,asChild:c=!1,...h}=e,d=c?a.DX:"button";return(0,o.jsx)(d,{className:(0,i.cn)(l({variant:n,size:s,className:r})),ref:t,...h})});c.displayName="Button"},1069:(e,t,r)=>{r.d(t,{A:()=>c,AuthProvider:()=>l});var o=r(5155),n=r(2115),a=r(6046);let s=(0,n.createContext)(void 0),i=[{username:"admin",password:"admin123",email:"admin@example.com",role:"admin"},{username:"researcher",password:"password",email:"researcher@example.com",role:"researcher"},{username:"user",password:"password",email:"user@example.com",role:"user"}];function l(e){let{children:t}=e,[r,l]=(0,n.useState)(null),[c,h]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),m=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{l(JSON.parse(e))}catch(e){console.error("Failed to parse stored user",e),localStorage.removeItem("user")}h(!1)},[]),(0,n.useEffect)(()=>{(async()=>{try{await fetch("".concat("http://localhost:8000/api","/health"),{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(5e3)}),g(!1)}catch(e){console.warn("API unavailable, using fallback mode:",e),g(!0)}})()},[]);let p=async(e,t)=>{h(!0),u(null);try{if(f){console.log("Using fallback authentication mode"),await new Promise(e=>setTimeout(e,500));let r=i.find(r=>r.username===e&&r.password===t);if(!r)throw Error("Invalid username or password");let o={username:r.username,role:r.role};localStorage.setItem("token","mock-token"),localStorage.setItem("user",JSON.stringify(o)),l(o),m.push("/");return}let r="".concat("http://localhost:8000/api","/auth/token");console.log("Attempting to login at:",r);let o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:e,password:t})}),n=o.headers.get("content-type");if(!n||!n.includes("application/json")){let e=await o.text();throw console.error("Received non-JSON response:",e.substring(0,200)+"..."),console.log("Switching to fallback mode due to non-JSON response"),g(!0),Error("Server returned non-JSON response. Switching to fallback mode.")}if(!o.ok){let e=await o.json();throw Error(e.detail||"Login failed")}let a=await o.json();localStorage.setItem("token",a.access_token),localStorage.setItem("user",JSON.stringify({username:a.username,role:a.role})),l({username:a.username,role:a.role}),m.push("/")}catch(e){console.error("Login error:",e),e instanceof Error?u(e.message):u("Login failed. Please check if the API server is running."),(e instanceof TypeError&&"Failed to fetch"===e.message||e instanceof Error&&e.message.includes("non-JSON response"))&&(u("Cannot connect to the authentication server. Switching to fallback mode."),g(!0))}finally{h(!1)}},w=async function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";h(!0),u(null);try{if(f){if(console.log("Using fallback registration mode"),await new Promise(e=>setTimeout(e,500)),i.some(t=>t.username===e))throw Error("Username already registered");if(i.some(e=>e.email===t))throw Error("Email already registered");i.push({username:e,email:t,password:r,role:o}),await p(e,r);return}let n="".concat("http://localhost:8000/api","/auth/register");console.log("Attempting to register at:",n);let a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:r,role:o})}),s=a.headers.get("content-type");if(!s||!s.includes("application/json")){let e=await a.text();throw console.error("Received non-JSON response:",e),Error("Server returned non-JSON response. API might be unavailable.")}if(!a.ok){let e=await a.json();throw Error(e.detail||"Registration failed")}await p(e,r)}catch(e){console.error("Registration error:",e),u(e instanceof Error?e.message:"Registration failed. Please check if the API server is running."),e instanceof TypeError&&"Failed to fetch"===e.message&&(u("Cannot connect to the registration server. Try using the fallback mode."),g(!0)),h(!1)}},y=async e=>{h(!0),u(null);try{if(f){console.log("Using fallback forgot password mode"),await new Promise(e=>setTimeout(e,500)),i.find(t=>t.email===e);return}let t="".concat("http://localhost:8000/api","/auth/forgot-password");console.log("Requesting password reset at:",t);let r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),o=r.headers.get("content-type");if(!o||!o.includes("application/json")){let e=await r.text();throw console.error("Received non-JSON response:",e),Error("Server returned non-JSON response. API might be unavailable.")}if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to process request")}}catch(e){console.error("Forgot password error:",e),u(e instanceof Error?e.message:"Failed to process request. Please check if the API server is running."),e instanceof TypeError&&"Failed to fetch"===e.message&&(u("Cannot connect to the server. Try using the fallback mode."),g(!0))}finally{h(!1)}},v=async(e,t)=>{h(!0),u(null);try{if(f){console.log("Using fallback reset password mode"),await new Promise(e=>setTimeout(e,500));return}let r="".concat("http://localhost:8000/api","/auth/reset-password");console.log("Resetting password at:",r);let o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,password:t})}),n=o.headers.get("content-type");if(!n||!n.includes("application/json")){let e=await o.text();throw console.error("Received non-JSON response:",e),Error("Server returned non-JSON response. API might be unavailable.")}if(!o.ok){let e=await o.json();throw Error(e.detail||"Failed to reset password")}}catch(e){throw console.error("Reset password error:",e),u(e instanceof Error?e.message:"Failed to reset password. Please check if the API server is running."),e instanceof TypeError&&"Failed to fetch"===e.message&&(u("Cannot connect to the server. Try using the fallback mode."),g(!0)),e}finally{h(!1)}};return(0,o.jsx)(s.Provider,{value:{user:r,login:p,register:w,forgotPassword:y,resetPassword:v,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),l(null),m.push("/")},isLoading:c,error:d,useFallbackMode:f},children:t})}function c(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9602:(e,t,r)=>{r.d(t,{cn:()=>o});function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}}}]);